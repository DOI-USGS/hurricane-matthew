vizlab: "0.1.4"
info:
  id: hurricane-matthew
  name: A look at Hurricane Matthew
  date: 2016-10-06
  path: /hurricane-matthew
  analytics-id: UA-78530187-4
  description: >-
    Bringing together a couple different sources of data
    to look at the effects of Hurricane Matthew on the
    Southeast United States Coast.
  keywords: >-
    water, hurricane, matthew, USGS, NOAA, VIZLAB
  thumbnail:    
    url: !NEED TO MAKE THIS THUMBNAIL!
    width: 250
    height: 250
    alttext: Hurricane Matthew
fetch:
  -
    id: counties
    location: cache/counties.zip
    reader: shp
    fetcher: counties
    refetch: false
    mimetype: application/zip
  -
    id: states
    location: cache/states.zip
    reader: shp
    fetcher: states
    refetch: false
    mimetype: application/zip
  -
    id: matthew-track
    location: cache/matthew.zip
    ocean: al
    stormnum: 14
    year: 2016
    reader: shp
    fetcher: hurricaneTrack
    mimetype: application/zip
    metadata: "Updates every 6 hours on http://www.nhc.noaa.gov/gis/"
    refetch: false
    comment: disabling refetch until timestamp is hooked up
  -
    id: flowlines
    fetcher: flowlines
    location: cache/nhdflowline_network.zip
    mapRange: [-100, -75.432129, 24.994771,40]
    streamorder: 6
    reader: shp
    mimetype: application/zip
    refetch: false
    comment: disabling refetch for now, delete cache to update
  -
    id: precip-data
    fetcher: precip
    location: cache/precip.csv
    mimetype: text/csv
    refetch: false
    comment: disabling refetch to avoid too many GDP requests
  -
    id: discharge-data
    fetcher: discharge
    location: cache/discharge.rds
    start.date: "2016-10-5"
    depends: ["sites-data","precip-data"]
    reader: rds
    refetch: false
    comment: disabling refetch for now, re-enable to get updates to work
  -
    id: sites-data
    fetcher: sites
    location: cache/sites.rds
    start.date: "2016-10-5"
    states: ["FL","SC","NC","GA"]
    reader: rds
    refetch: false
    comment: disabling refetch for now, re-enable to get updates to work
  -
    id: stats-data
    fetcher: stats
    location: cache/stats.rds
    depends: ["sites-data"]
    reader: rds
    refetch: false
    comment: disabling refetch for now, re-enable to get updates to work
process:
  -
    id: matthew-counties
    location: cache/matthew-counties.rds
    processor: matthew_counties
    reader: rds
    depends: "counties"
  -
    id: matthew-states
    location: cache/matthew-states.rds
    processor: matthew_states
    reader: rds
    depends: "states"
  -
    id: matthew-flowlines
    location: cache/matthew-flowlines.rds
    processor: flowlines
    reader: rds
    depends: ["flowlines","matthew-counties"]
  -
    id: storm-track
    location: cache/storm-track.rds
    processor: matthew_track
    reader: rds
    depends: ["matthew-track", "matthew-counties"]
  -
    id: discharge-classify
    location: cache/discharge-classify.rds
    processor: classify
    reader: rds
    depends: ["discharge-data","stats-data"]
  -
    id: precip-colors
    location: cache/precip-colors.json
    processor: precip_colors
    reader: json
    bins: 9
    pallete: "Blues"
    mimetype: application/javascript
    export: true
  - 
    id: classifyBins
    location: cache/precipBinned.rds
    processor: classifyBins
    reader: rds
    depends: ["precip-colors", "precip-data"]
  -
    id: matthew-sites
    location: cache/sites_geo.rds
    processor: sites
    reader: rds
    depends: ["sites-data","matthew-counties"]
visualize:
  -
    id: matthew-map
    location: figures/matthew-water.svg
    visualizer: matthew_map
    depends: ["matthew-counties","matthew-flowlines", "matthew-states", "storm-track", "classifyBins"]
    mapdata: "matthew-counties"
    mimetype: image/svg+xml
    inline: true
    title: "title..."
    alttext: "alt text..."
    
publish:
  -
    id: map-figure-css
    location: layout/css/map-figure.css
    mimetype: text/css
  - 
    id: header-footer-css
    location: layout/css/header-footer.css
    mimetype: text/css
  -
    id: usgs-logo
    location: images/usgsLogo.png
    mimetype: image/png
    title: "USGS Logo"
    alttext: "USGS Logo"
  -
    id: jquery-js
    location: layout/js/jquery-3.1.1.min.js
    mimetype: application/javascript
  -
    id: animate-js
    location: layout/js/animate.js
    mimetype: application/javascript
  -
    id: matthew-page
    name: index
    template: fullPage
    publisher: page
    depends: ["header-section", "figure-section", "data-sources", "map-figure-css", "header-footer-css","precip-colors", "jquery-js", "animate-js", "svg-css"]
    context:
      resources: ["map-figure-css","header-footer-css", "jquery-js", "precip-colors", "animate-js", "svg-css"]
      sections: [ "header-section", "figure-section", "data-sources" ]
  -
    id: figure-section
    template: layout/templates/mapFigure.mustache
    publisher: section
    depends: [ "matthew-map" ]
    context:
      id: map-figure
      figure: matthew-map
      title: Hurricane Matthew’s Impact on River Flow
      caption: Hurricane Matthew made landfall in Florida on October 7, 2016. In the map above, the hurricane’s impact on precipitation and streamflow are shown as the storm makes landfall and moves up the coast of the southeastern US.
  -
    id: header-section
    template: layout/templates/header.mustache
    publisher: section
    depends: ["usgs-logo"]
    context:
      id: header
      title: Hurricane Matthew Precipitation
      logo: usgs-logo
      caption: Precipitation from Hurricane Matthew
  -
    id: data-sources
    template: layout/templates/dataSources.mustache
    publisher: section
    context:
      id: dataSources
      title: Data Sources
  -
    id: svg-css
    location: layout/css/matthew-svg.css
    mimetype: text/css
